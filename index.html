<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AI Debug Terminal</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
        #chat { border: 1px solid #0f0; height: 300px; overflow-y: auto; padding: 10px; background: #050505; }
        .system { color: #555; font-size: 12px; }
        .ai { color: #fff; padding: 10px; border-left: 2px solid #0f0; margin: 5px 0; }
    </style>
</head>
<body>
    <div id="chat">*** ПРОВЕРКА КАНАЛА... ***</div>
    <input type="text" id="inp" placeholder="Напиши 'Test'..." style="width:70%; background:#000; color:#0f0; border:1px solid #0f0; padding:10px;">
    <button onclick="send()" id="btn">ПУСК</button>

    <script>
        // ВСТАВЬ СЮДА СВОЮ САМУЮ ПОСЛЕДНЮЮ ССЫЛКУ
        const googleUrl = "ТВОЯ_НОВАЯ_ССЫЛКА";

        window.handleResponse = function(data) {
            console.log("Данные получены:", data);
            const chat = document.getElementById('chat');
            let text = Array.isArray(data) ? data[0].generated_text : (data.generated_text || "Пусто");
            chat.innerHTML += `<div class="ai">${text}</div>`;
            document.getElementById('btn').disabled = false;
        };

        function send() {
            const val = document.getElementById('inp').value;
            const chat = document.getElementById('chat');
            if(!val) return;

            chat.innerHTML += `<div>> ${val}</div>`;
            chat.innerHTML += `<div class="system">[Создаю тег script...]</div>`;
            document.getElementById('btn').disabled = true;

            const script = document.createElement('script');
            // Добавляем случайное число, чтобы браузер не брал старый ответ из кэша
            script.src = `${googleUrl}?inputs=${encodeURIComponent(val)}&callback=handleResponse&nocache=${Math.random()}`;
            
            script.onerror = function() {
                chat.innerHTML += `<div style="color:red">[КРИТИЧЕСКАЯ ОШИБКА: Скрипт не смог загрузиться. Проверь ссылку!]</div>`;
                document.getElementById('btn').disabled = false;
            };

            document.body.appendChild(script);
        }
    </script>
</body>
</html>
